#include<iostream>
using namespace std;

int Partition(int r[],int low,int high){//划分函数
    int i=low,j=high,pivot=r[low];//基准元素
    while(i<j){
        while(i<j&&r[j]>pivot) j--;//向左扫描
        if(i<j)
            swap(r[i++],r[j]);      //r[i]和r[j]交换后i+1，右移1位
        while(i<j&&r[i]<=pivot) i++;//向右扫描
        if(i<j)
            swap(r[i],r[j--]);    //r[i]和r[j]交换 后j-1，左移1位
    }
    return i;//返回基准元素位置
}

int Partition2(int r[],int low,int high){//划分函数优化 
    int i=low,j=high,pivot=r[low];//基准元素
    while(i<j){
        while(i<j&&r[j]>pivot) j--;//向左扫描
        while(i<j&&r[i]<=pivot) i++;//向右扫描
        if(i<j)
            swap(r[i++],r[j--]); //r[i]和r[j]交换
    }
    if(r[i]>pivot){
        swap(r[i-1],r[low]);  //r[i-1]和r[low]交换
        return i-1;      //返回基准元素位置
    }
    swap(r[i],r[low]);//r[i]和r[low]交换
    return i;//返回基准元素位置
}

void QuickSort(int r[],int low,int high){//快速排序 
    if(low<high){
        int mid=Partition(r,low,high); //划分
        QuickSort(r,low,mid-1);   //左区间递归快排
        QuickSort(r,mid+1,high);  //右区间递归快排
    }
}

int main(){
    int a[100],n;
    cout<<"请先输入要排序的数据的个数：";
    cin>>n;
    cout<<"请输入要排序的数据：";
    for(int i=0;i<n;i++)
        cin>>a[i];
    QuickSort(a,0,n-1);
    cout<<"排序后的序列为："<<endl;
    for(int i=0;i<n;i++)
        cout<<a[i]<<" ";
    return 0;
}
/*测试数据 
9
30 24 5 58 18 36 12 42 39
*/
